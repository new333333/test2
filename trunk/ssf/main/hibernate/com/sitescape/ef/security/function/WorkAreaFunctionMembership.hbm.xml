<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping auto-import="false">
  <class dynamic-update="true" lazy="false" table="SS_WorkAreaFunctionMemberships" name="com.sitescape.team.security.function.WorkAreaFunctionMembership">
    <cache usage="nonstrict-read-write"/>
    <id unsaved-value="null" name="id" type="long">
      <generator class="native"/>
    </id>
    <version unsaved-value="undefined" name="lockVersion" type="long"/>
    <set cascade="all" lazy="false" table="SS_WorkAreaFunctionMembers" name="memberIds">
      <cache usage="nonstrict-read-write"/>
      <key column="workAreaFunctionMembershipId"/>
      <element not-null="true" type="long" column="memberId"/>
    </set>
    <property name="workAreaId" column="workAreaId" not-null="true" type="long"/>
    <property name="workAreaType" length="16" column="workAreaType" not-null="true"/>
    <property name="zoneId" not-null="true"/>
    <property name="functionId" column="functionId" not-null="true" type="long"/>
  </class>
  <query name="check-WorkAreaFunctionMembership"><![CDATA[select fm.id from com.sitescape.team.security.function.Function function join function.operationNames operationName, com.sitescape.team.security.function.WorkAreaFunctionMembership fm join fm.memberIds memberId where function.zoneId=:zoneId and fm.zoneId=:zoneId and fm.workAreaId=:workAreaId and fm.workAreaType=:workAreaType and operationName=:operationName and function.id=fm.functionId and memberId in (:principalIds)]]></query>
  <query name="get-WorkAreaFunctionMembershipByOperation"><![CDATA[select fm from com.sitescape.team.security.function.Function function join function.operationNames operationName, com.sitescape.team.security.function.WorkAreaFunctionMembership fm join fm.memberIds memberId where function.zoneId=:zoneId and fm.zoneId=:zoneId and fm.workAreaId=:workAreaId and fm.workAreaType=:workAreaType and operationName=:operationName and function.id=fm.functionId]]></query>
  <query name="get-FunctionMembershipByOperation"><![CDATA[select fm from com.sitescape.team.security.function.Function function join function.operationNames operationName, com.sitescape.team.security.function.WorkAreaFunctionMembership fm join fm.memberIds memberId where function.zoneId=:zoneId and fm.zoneId=:zoneId and operationName=:operationName and function.id=fm.functionId and memberId in (:principalIds)]]></query>
	                    			
</hibernate-mapping>
