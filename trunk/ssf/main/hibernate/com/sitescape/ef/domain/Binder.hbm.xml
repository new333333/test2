<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping auto-import="false">
  <class dynamic-update="true" lazy="false" table="SS_Forums" dynamic-insert="false" name="com.sitescape.ef.domain.Binder">
    <cache usage="read-write"/>
    <id unsaved-value="null" name="id" type="long" node="@id">
      <generator class="native"/>
    </id>
    <discriminator type="string" column="type" length="16"/>
    <version unsaved-value="undefined" name="lockVersion" column="lockVersion" type="long"/>
    <property name="zoneName" length="100" not-null="true"/>
    <many-to-one name="parentBinder"/>
      <bag inverse="true" access="field" cascade="all" optimistic-lock="false" lazy="true" name="binders">
        <cache usage="read-write"/>
        <key column="parentBinder"/>
        <one-to-many class="com.sitescape.ef.domain.Binder"/>
      </bag>
    <map inverse="true" access="field" cascade="all,delete-orphan" lazy="true" name="customAttributes">
      <key column="binder"/>
      <map-key type="string" column="name"/>
      <one-to-many class="com.sitescape.ef.domain.CustomAttribute"/>
    </map>
    <map inverse="false" table="SS_WorkflowMap" access="field" cascade="persist,merge,save-update,refresh,evict" lazy="true" name="workflowAssociations">
      <key column="binder"/>
      <map-key type="string" column="entryDefinition" length="32"/>
      <many-to-many class="com.sitescape.ef.domain.Definition">
      	<column name="workflowDefinition" sql-type="char(32)"/>
      </many-to-many>
    </map>
    <set inverse="true" access="field" cascade="all,delete-orphan" lazy="true" batch-size="4" name="attachments">
      <key column="binder"/>
      <one-to-many class="com.sitescape.ef.domain.Attachment"/>
    </set>
    <set inverse="true" access="field" cascade="all,delete-orphan" lazy="true" batch-size="4" name="events">
      <key column="binder"/>
      <one-to-many class="com.sitescape.ef.domain.Event"/>
    </set>
    <list inverse="false" access="field" cascade="persist,merge,save-update,refresh,evict" lazy="true" table="SS_DefinitionMap" name="definitions">
      <cache usage="nonstrict-read-write"/>
      <key column="binder"/>
      <index type="integer" column="position"/>
      <many-to-many fetch="join" class="com.sitescape.ef.domain.Definition">
        <column name="definition" sql-type="char(32)"/>
      </many-to-many>
    </list>
    <many-to-one access="field" class="com.sitescape.ef.domain.Definition" name="defaultPostingDef">
      <column name="defaultPostingDef" sql-type="char(32)"/>
    </many-to-one>
    <property name="type" length="16" update="false" insert="false"/>
    <property name="name" length="128" not-null="true"/>
    <property name="pathName" length="1024"/>
    <component name="notificationDef">
      <property name="teamOn" column="notify_teamOn"/>
      <property name="emailAddress" access="field" column="notify_email" type="org.springframework.orm.hibernate3.support.ClobStringType"/>
      <property name="fromAddress" length="128" column="notify_fromAddress"/>
      <property name="subject" length="128" column="notify_subject"/>
    </component>
    <bag inverse="true" cascade="all,delete-orphan" optimistic-lock="false" lazy="true" name="postings">
      <key column="binder"/>
      <one-to-many class="com.sitescape.ef.domain.PostingDef"/>
    </bag>
    <component name="owner" node="owner">
      <property name="date" column="owner_date" type="timestamp"/>
      <many-to-one class="com.sitescape.ef.domain.Principal" embed-xml="false" node="Principal" name="principal">
        <column name="owner_principal"/>
      </many-to-one>
    </component>
    <property name="properties" type="org.springframework.orm.hibernate3.support.BlobSerializableType"/>
    <property name="functionMembershipInherited" not-null="true"/>
    <component name="aclSet" class="com.sitescape.ef.domain.PersistentAclSet">
      <property name="readMembers" type="com.sitescape.ef.dao.util.SSClobStringType">
        <column name="acl_readMembers"/>
      </property>
      <property name="writeMembers" type="com.sitescape.ef.dao.util.SSClobStringType">
        <column name="acl_writeMembers"/>
      </property>
      <property name="deleteMembers" type="com.sitescape.ef.dao.util.SSClobStringType">
        <column name="acl_deleteMembers"/>
      </property>
      <property name="changeAclMembers" type="com.sitescape.ef.dao.util.SSClobStringType">
        <column name="acl_changeAclMembers"/>
      </property>
    </component>
    <property name="definitionsInherited"/>
    <property name="definitionType"/>
    <component name="averageRating" class="com.sitescape.ef.domain.AverageRating">
      <property name="average" column="rating_average" />
      <property name="count" column="rating_count"/>
    </component>
    <property name="popularity"/>
    <property name="inheritAclFromParent" column="acl_inheritFromParent"/>
    <property name="widenRead" column="acl_widenRead"/>
    <property name="widenModify" column="acl_widenModify"/>
    <property name="widenDelete" column="acl_widenDelete"/>
    <component name="description">
      <property name="HDescription" column="description_text" type="com.sitescape.ef.dao.util.SSClobStringType"/>
      <property name="HFormat" column="description_format"/>
    </component>
    <property name="title" length="1024"/>
    <property name="iconName" length="64"/>    
    <many-to-one access="field" class="com.sitescape.ef.domain.Definition" name="entryDef">
      <column name="entryDef" sql-type="char(32)"/>
    </many-to-one>
    <component name="creation" node="creation" class="com.sitescape.ef.domain.HistoryStamp">
      <property name="date" column="creation_date" type="timestamp"/>
      <many-to-one class="com.sitescape.ef.domain.Principal" embed-xml="false" node="Principal" name="principal">
        <column name="creation_principal"/>
      </many-to-one>
    </component>
    <component name="modification" node="modification" class="com.sitescape.ef.domain.HistoryStamp">
      <property name="date" column="modification_date" type="timestamp"/>
      <many-to-one class="com.sitescape.ef.domain.Principal" embed-xml="false" node="Principal" name="principal">
        <column name="modification_principal"/>
      </many-to-one>
    </component>
    <subclass name="com.sitescape.ef.domain.Folder" node="ss_folder" discriminator-value="folder" dynamic-update="true">
      <many-to-one embed-xml="false" node="topFolder/@id" name="topFolder"/>
      <property name="nextEntryNumber"/>
      <property name="nextFolderNumber"/>
      <property name="displayStyle"/>
      <component name="folderHKey" class="com.sitescape.ef.domain.HKey">
        <property name="level" column="folder_level"/>
        <property name="sortKey" length="512" column="folder_sortKey"/>
      </component>
      <component name="entryRootHKey" class="com.sitescape.ef.domain.HKey">
        <property name="level" column="entryRoot_level"/>
        <property name="sortKey" length="512" column="entryRoot_sortKey"/>
      </component>
    </subclass>
    <subclass name="com.sitescape.ef.domain.ProfileBinder" discriminator-value="profiles" dynamic-update="true"/>
    <subclass name="com.sitescape.ef.domain.Workspace" discriminator-value="workspace" dynamic-update="true">
    </subclass>
  </class>
  <query name="find-Binder-Company"><![CDATA[from com.sitescape.ef.domain.Binder binder where binder.name=:binderName and binder.zoneName=:zoneName]]></query>
</hibernate-mapping>
