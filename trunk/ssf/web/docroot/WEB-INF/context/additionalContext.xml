<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "../dtd/spring-beans.dtd">

<beans>
	<!-- Hibernate session factory -->
	<bean id="sessionFactory" class="com.sitescape.team.spring.orm.hibernate3.LocalSessionFactoryBean">
		<property name="lobHandler"><ref bean="lobHandler"/></property>
		<property name="configFiles">
			<list>
				<value>config/hibernate.cfg.xml</value>
				<value>optional:config/hibernate-ext.cfg.xml</value>
			</list>
		</property>
		<property name="entityInterceptor"><ref bean="zoneInterceptor"/></property>
		
		<!-- Hibernate properties are loaded from a separate file - hibernate.properties -->
	</bean>
	<!-- ========================= Data Access (DAO) Components ====================== -->
	<bean id="folderDao" class="com.sitescape.team.dao.impl.FolderDaoImpl">
		<property name="sessionFactory"><ref bean="sessionFactory"/></property>
		<property name="coreDao"><ref bean="coreDao"/></property>
	</bean>

	<!-- ============================== Modules ============================= -->

	<bean id="ldapModule"  class="com.sitescape.team.module.ldap.impl.NullLdapModuleImpl"/>
	<bean id="workflowModule" class="com.sitescape.team.module.workflow.impl.NullWorkflowModuleImpl"/>
	
	<bean id="folderModuleTarget" parent="dependOnCommonServicesTemplate" class="com.sitescape.team.module.folder.impl.BaseFolderModule">
		<property name="definitionModule"><ref bean="definitionModule"/></property>
		<property name="fileModule"><ref bean="fileModule"/></property>
    	<property name="binderModule"><ref bean="binderModule"/></property>
	</bean>

	<bean id="licenseModuleTarget" parent="dependOnCommonServicesTemplate" class="com.sitescape.team.module.license.impl.BaseLicenseModule">
		<property name="reportModule"><ref bean="reportModule"/></property>
	</bean>

	<!--  Initialize the zone and checks dependencies -->
	<bean id="zoneModule"  parent="dependOnCommonServicesTemplate" class="com.sitescape.team.module.zone.impl.BaseZoneModule" depends-on="nlt, zoneConfig, binderAccessUtils" >
		<property name="transactionTemplate"><ref bean="transactionTemplate"/></property>
		<property name="adminModule"><ref bean="adminModule"/></property>
		<property name="definitionModule"><ref bean="definitionModule"/></property>
		<property name="profileModule"><ref bean="profileModule"/></property>
		<property name="binderModule"><ref bean="binderModule"/></property>
		<property name="scheduleModules">
			<list>
			<ref bean="folderModule"/>
			<ref bean="licenseModule"/>
			<ref bean="mailModule"/>
			</list>
		</property>
	</bean>
	
	<!-- ============================== Services ============================= -->

	<bean id="archiveStore" class="com.sitescape.team.repository.archive.impl.NullArchiveStore">
	</bean>
	
	<bean id="licenseManager" class="com.sitescape.team.license.impl.NullLicenseManager"/>

	<!-- ============================== Document Converter ============================ -->

	<!-- View file as HTML manager implementation -->
    <bean id="htmlConverterManager" class="com.sitescape.team.docconverter.impl.HtmlConverterManagerImpl">
    	<!-- Options 1=OpenOffice conversion implementation -->
    	<property name="active"><value>1</value></property>
    	<property name="openOfficeConverter"><ref bean="htmlOpenOfficeConverter"/></property>
    </bean>
    
    <bean id="textConverterManager" class="com.sitescape.team.docconverter.impl.TextConverterManagerImpl">
    	<!-- Options 1=OpenOffice, 2=Stellent conversion implementation -->
    	<property name="active"><value>1</value></property>
    	<property name="openOfficeConverter"><ref bean="textOpenOfficeConverter"/></property>
    </bean>
    
    <bean id="imageConverterManager" class="com.sitescape.team.docconverter.impl.ImageConverterManagerImpl">
    	<!-- Options 1=OpenOffice, 2=Stellent conversion implementation -->
    	<property name="active"><value>1</value></property>
    	<property name="openOfficeConverter"><ref bean="imageOpenOfficeConverter"/></property>
    </bean>
    
    <!-- ============================= File Integration Service ============================ -->
    
	<bean id="resourceDriverManager" class="com.sitescape.team.fi.connection.impl.NullResourceDriverManager"/>
    
    <bean id="fiAdapter" class="com.sitescape.team.repository.fi.impl.NullFIRepositorySessionFactoryAdapter"/>
	
</beans>