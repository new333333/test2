<?xml version="1.0"?>

<project name="tomcat" basedir="." default="compile">
	<import file="../build-common.xml" />
	
	<import file="../deploy-support.xml" />
	
	<target name="deploy">
		<property file="${project.dir}/tools/sql/database.${user.name}.properties" />
		<property file="${project.dir}/tools/sql/database.properties" />
		<property file="${project.dir}/tools/sql/jdbc-${database.type}.properties"/>
		<property file="${project.dir}/tools/mail/mail-ext.properties"/>
		<property file="${project.dir}/tools/mail/mail.properties"/>
		<copy todir="${app.server.dir}" overwrite="true">
			<fileset dir="resources" />
		</copy>
		<replace file="${app.server.dir}/conf/Catalina/localhost/ssf.xml" 
			token="@@@driverClassName" value="${jdbc.driver}"/>
		<replace file="${app.server.dir}/conf/Catalina/localhost/ssf.xml" 
			token="@@@url" value="${jdbc.url}"/>
		<replace file="${app.server.dir}/conf/Catalina/localhost/ssf.xml" 
			token="@@@username" value="${jdbc.username}"/>
		<replace file="${app.server.dir}/conf/Catalina/localhost/ssf.xml" 
			token="@@@password" value="${jdbc.password}"/>
		<replace file="${app.server.dir}/conf/Catalina/localhost/ssf.xml" 
			token="@@@mail.transport.protocol.out" value="${mail.transport.protocol.out}"/>
		<replace file="${app.server.dir}/conf/Catalina/localhost/ssf.xml" 
			token="@@@mail.smtp.host.out" value="${mail.smtp.host.out}"/>
		<replace file="${app.server.dir}/conf/Catalina/localhost/ssf.xml" 
			token="@@@mail.smtp.user.out" value="${mail.smtp.user.out}"/>

		<replace file="${app.server.dir}/conf/Catalina/localhost/ssf.xml" 
			token="@@@mail.store.protocol.in" value="${mail.store.protocol.in}"/>
		<replace file="${app.server.dir}/conf/Catalina/localhost/ssf.xml" 
			token="@@@mail.pop3.host.in" value="${mail.pop3.host.in}"/>
		<replace file="${app.server.dir}/conf/Catalina/localhost/ssf.xml" 
			token="@@@mail.pop3.auth.in" value="${mail.pop3.auth.in}"/>
		<replace file="${app.server.dir}/conf/Catalina/localhost/ssf.xml" 
			token="@@@mail.pop3.user.in" value="${mail.pop3.user.in}"/>
		<replace file="${app.server.dir}/conf/Catalina/localhost/ssf.xml" 
			token="@@@mail.pop3.password.in" value="${mail.pop3.password.in}"/>

		<replace file="${app.server.dir}/conf/Catalina/localhost/ssf.xml" 
			token="@@@mail.imap.host.in" value="${mail.imap.host.in}"/>
		<replace file="${app.server.dir}/conf/Catalina/localhost/ssf.xml" 
			token="@@@mail.imap.auth.in" value="${mail.imap.auth.in}"/>
		<replace file="${app.server.dir}/conf/Catalina/localhost/ssf.xml" 
			token="@@@mail.imap.user.in" value="${mail.imap.user.in}"/>
		<replace file="${app.server.dir}/conf/Catalina/localhost/ssf.xml" 
			token="@@@mail.imap.password.in" value="${mail.imap.password.in}"/>

		<replace file="${app.server.dir}/conf/Catalina/localhost/ssf.xml" 
			token="@@@mail.transport.protocol.in" value="${mail.transport.protocol.in}"/>
		<replace file="${app.server.dir}/conf/Catalina/localhost/ssf.xml" 
			token="@@@mail.smtp.host.in" value="${mail.smtp.host.in}"/>
		<replace file="${app.server.dir}/conf/Catalina/localhost/ssf.xml" 
			token="@@@mail.smtp.user.in" value="${mail.smtp.user.in}"/>
	</target>
</project>
