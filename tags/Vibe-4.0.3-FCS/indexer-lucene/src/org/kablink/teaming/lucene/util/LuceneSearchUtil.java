/**
 * Copyright (c) 1998-2014 Novell, Inc. and its licensors. All rights reserved.
 * 
 * This work is governed by the Common Public Attribution License Version 1.0 (the
 * "CPAL"); you may not use this file except in compliance with the CPAL. You may
 * obtain a copy of the CPAL at http://www.opensource.org/licenses/cpal_1.0. The
 * CPAL is based on the Mozilla Public License Version 1.1 but Sections 14 and 15
 * have been added to cover use of software over a computer network and provide
 * for limited attribution for the Original Developer. In addition, Exhibit A has
 * been modified to be consistent with Exhibit B.
 * 
 * Software distributed under the CPAL is distributed on an "AS IS" basis, WITHOUT
 * WARRANTY OF ANY KIND, either express or implied. See the CPAL for the specific
 * language governing rights and limitations under the CPAL.
 * 
 * The Original Code is ICEcore, now called Kablink. The Original Developer is
 * Novell, Inc. All portions of the code written by Novell, Inc. are Copyright
 * (c) 1998-2009 Novell, Inc. All Rights Reserved.
 * 
 * Attribution Information:
 * Attribution Copyright Notice: Copyright (c) 1998-2009 Novell, Inc. All Rights Reserved.
 * Attribution Phrase (not exceeding 10 words): [Powered by Kablink]
 * Attribution URL: [www.kablink.org]
 * Graphic Image as provided in the Covered Code
 * [ssf/images/pics/powered_by_icecore.png].
 * Display of Attribution Information is required in Larger Works which are
 * defined in the CPAL as a work which combines Covered Code or portions thereof
 * with code not governed by the terms of the CPAL.
 * 
 * NOVELL and the Novell logo are registered trademarks and Kablink and the
 * Kablink logos are trademarks of Novell, Inc.
 */
package org.kablink.teaming.lucene.util;

import java.util.ArrayList;
import java.util.List;

import org.apache.lucene.document.Document;
import org.apache.lucene.index.Term;

public class LuceneSearchUtil {
	
	/**
	 * Given a list of Lucene objects (Document or Term) that get passed as input to addDeleteDocuments()
	 * method in Lucene service, get only those objects that will result in "net" deletes from the index.
	 * Since Lucene implements an update as a delete followed by a add, just because a delete request is
	 * issued by the application doesn't necessarily mean that it is an effective delete. This method
	 * can be used to make an educated guess about the caller's intention without changing current 
	 * service API. However, this method doesn't guarantee the accuracy of such guess, so the result
	 * should only be used for informational purpose only (e.g. logging or to aid with trouble shooting).
	 * 
	1) Adding a folder

	_uid:org.kablink.teaming.domain.Workspace_38
	Document<indexed,omitNorms,indexOptions=DOCS_ONLY<_entryAcl:all> indexed,omitNorms,indexOptions=DOCS_ONLY<_folderAcl:own> indexed,omitNorms,indexOptions=DOCS_ONLY<_folderAcl:team> indexed,omitNorms,indexOptions=DOCS_ONLY<_bOwnerAcl:1> indexed,omitNorms,indexOptions=DOCS_ONLY<_rootAcl:all> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_normTitle:admin (admin)> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_normTitleField:admin (admin)> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_uid:org.kablink.teaming.domain.Workspace_38> indexed,omitNorms,indexOptions=DOCS_ONLY<_class:org.kablink.teaming.domain.Workspace> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_docId:38> indexed,tokenized,omitNorms,indexOptions=DOCS_ONLY<_entityId:38> stored,indexed,tokenized<title:admin (admin)> indexed,omitNorms,indexOptions=DOCS_ONLY<_sortTitle:admin (admin)> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_title1:a> indexed,omitNorms<title:admin (admin)> stored,indexed,tokenized<_extendedTitle:admin (admin)> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_bsortTitle:admin (admin)> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_entityType:workspace> indexed,omitNorms,indexOptions=DOCS_ONLY<_preDeleted:false> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_definitionType:12> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_commandDef:402883b90cc53079010cc539bf26000b> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_createdWithDef:402883b90cc53079010cc539bf26000b> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_family:user> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_entryAncestry:38> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_entryAncestry:2> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_entryAncestry:1> stored,omitNorms,indexOptions=DOCS_ONLY<_entityPath:/Home Workspace/Personal Workspaces/admin (admin)> indexed,omitNorms,indexOptions=DOCS_ONLY<_sortEntityPath:/home workspace/personal workspaces/admin (admin)> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_iconName:/icons/workspace_user.png> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_isLibrary:false> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_isMirrored:false> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_isHomeDir:false> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_isMyFilesDir:false> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_isCloud:false> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creationDate:20130116024931> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creationDay:20130116> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creationYearMonth:201301> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creationYear:2013> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creatorId:1> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creatorName:admin> stored,indexed,tokenized<_creatorTitle:admin> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_sortCreatorTitle:admin> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationDate:20140629205428> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationDay:20140629> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationYearMonth:201406> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationYear:2014> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationId:1> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationName:admin> stored,indexed,tokenized<_modificationTitle:admin> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_ownerId:1> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_ownerName:admin> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_ownerTitle:admin> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_binderParentId:2> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_docType:binder> stored,indexed,tokenized,omitNorms,indexOptions=DOCS_ONLY<_eventDates:> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_eventCount:0> stored,omitNorms,indexOptions=DOCS_ONLY<_tagField:> indexed,tokenized<_generalText:>>
	_uid:org.kablink.teaming.domain.Folder_14939
	Document<indexed,omitNorms,indexOptions=DOCS_ONLY<_entryAcl:all> indexed,omitNorms,indexOptions=DOCS_ONLY<_folderAcl:own> indexed,omitNorms,indexOptions=DOCS_ONLY<_folderAcl:team> indexed,omitNorms,indexOptions=DOCS_ONLY<_bOwnerAcl:1> indexed,omitNorms,indexOptions=DOCS_ONLY<_rootAcl:all> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_normTitle:subfolder2> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_normTitleField:subfolder2> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_uid:org.kablink.teaming.domain.Folder_14939> indexed,omitNorms,indexOptions=DOCS_ONLY<_class:org.kablink.teaming.domain.Folder> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_docId:14939> indexed,tokenized,omitNorms,indexOptions=DOCS_ONLY<_entityId:14939> stored,indexed,tokenized<title:subfolder2> indexed,omitNorms,indexOptions=DOCS_ONLY<_sortTitle:subfolder2> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_title1:s> indexed,omitNorms<title:subfolder2> stored,indexed,tokenized<_extendedTitle:subfolder2 (admin (admin))> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_bsortTitle:subfolder2> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_entityType:folder> indexed,omitNorms,indexOptions=DOCS_ONLY<_preDeleted:false> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_definitionType:5> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_commandDef:402883c6115753d8011157619e350009> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_createdWithDef:402883c6115753d8011157619e350009> indexed,omitNorms,indexOptions=DOCS_ONLY<_entryDefs: 402883c6115753d8011157829367000f> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_family:file> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_entryAncestry:14939> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_entryAncestry:38> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_entryAncestry:2> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_entryAncestry:1> stored,omitNorms,indexOptions=DOCS_ONLY<_entityPath:/Home Workspace/Personal Workspaces/admin (admin)/subfolder2> indexed,omitNorms,indexOptions=DOCS_ONLY<_sortEntityPath:/home workspace/personal workspaces/admin (admin)/subfolder2> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_iconName:/icons/folder_blue_file_library.png> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_isLibrary:true> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_isMirrored:false> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_isHomeDir:false> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_isMyFilesDir:false> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_isTopFolder:true> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_isCloud:false> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_fileTime:1404075268614> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creationDate:20140629205428> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creationDay:20140629> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creationYearMonth:201406> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creationYear:2014> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creatorId:1> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creatorName:admin> stored,indexed,tokenized<_creatorTitle:admin> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_sortCreatorTitle:admin> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationDate:20140629205428> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationDay:20140629> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationYearMonth:201406> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationYear:2014> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationId:1> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationName:admin> stored,indexed,tokenized<_modificationTitle:admin> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_ownerId:1> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_ownerName:admin> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_ownerTitle:admin> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_binderParentId:38> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_docType:binder> stored,indexed,tokenized,omitNorms,indexOptions=DOCS_ONLY<_eventDates:> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_eventCount:0> stored,omitNorms,indexOptions=DOCS_ONLY<_tagField:> indexed,tokenized<_generalText:>>
	_uid:org.kablink.teaming.domain.Folder_14939
	Document<indexed,omitNorms,indexOptions=DOCS_ONLY<_entryAcl:all> indexed,omitNorms,indexOptions=DOCS_ONLY<_folderAcl:own> indexed,omitNorms,indexOptions=DOCS_ONLY<_folderAcl:team> indexed,omitNorms,indexOptions=DOCS_ONLY<_bOwnerAcl:1> indexed,omitNorms,indexOptions=DOCS_ONLY<_rootAcl:all> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_normTitle:subfolder2> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_normTitleField:subfolder2> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_uid:org.kablink.teaming.domain.Folder_14939> indexed,omitNorms,indexOptions=DOCS_ONLY<_class:org.kablink.teaming.domain.Folder> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_docId:14939> indexed,tokenized,omitNorms,indexOptions=DOCS_ONLY<_entityId:14939> stored,indexed,tokenized<title:subfolder2> indexed,omitNorms,indexOptions=DOCS_ONLY<_sortTitle:subfolder2> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_title1:s> indexed,omitNorms<title:subfolder2> stored,indexed,tokenized<_extendedTitle:subfolder2 (admin (admin))> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_bsortTitle:subfolder2> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_entityType:folder> indexed,omitNorms,indexOptions=DOCS_ONLY<_preDeleted:false> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_definitionType:5> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_commandDef:402883c6115753d8011157619e350009> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_createdWithDef:402883c6115753d8011157619e350009> indexed,omitNorms,indexOptions=DOCS_ONLY<_entryDefs: 402883c6115753d8011157829367000f> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_family:file> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_entryAncestry:14939> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_entryAncestry:38> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_entryAncestry:2> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_entryAncestry:1> stored,omitNorms,indexOptions=DOCS_ONLY<_entityPath:/Home Workspace/Personal Workspaces/admin (admin)/subfolder2> indexed,omitNorms,indexOptions=DOCS_ONLY<_sortEntityPath:/home workspace/personal workspaces/admin (admin)/subfolder2> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_iconName:/icons/folder_blue_file_library.png> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_isLibrary:true> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_isMirrored:false> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_isHomeDir:false> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_isMyFilesDir:false> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_isTopFolder:true> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_isCloud:false> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_fileTime:1404075268614> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creationDate:20140629205428> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creationDay:20140629> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creationYearMonth:201406> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creationYear:2014> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creatorId:1> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creatorName:admin> stored,indexed,tokenized<_creatorTitle:admin> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_sortCreatorTitle:admin> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationDate:20140629205428> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationDay:20140629> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationYearMonth:201406> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationYear:2014> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationId:1> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationName:admin> stored,indexed,tokenized<_modificationTitle:admin> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_ownerId:1> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_ownerName:admin> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_ownerTitle:admin> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_binderParentId:38> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_docType:binder> stored,indexed,tokenized,omitNorms,indexOptions=DOCS_ONLY<_eventDates:> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_eventCount:0> stored,omitNorms,indexOptions=DOCS_ONLY<_tagField:> indexed,tokenized<_generalText:>>

	=> even (using _uid)

	2) Adding a file

	_uid:org.kablink.teaming.domain.Folder_14939
	Document<indexed,omitNorms,indexOptions=DOCS_ONLY<_entryAcl:all> indexed,omitNorms,indexOptions=DOCS_ONLY<_folderAcl:own> indexed,omitNorms,indexOptions=DOCS_ONLY<_folderAcl:team> indexed,omitNorms,indexOptions=DOCS_ONLY<_bOwnerAcl:1> indexed,omitNorms,indexOptions=DOCS_ONLY<_rootAcl:all> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_normTitle:subfolder2> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_normTitleField:subfolder2> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_uid:org.kablink.teaming.domain.Folder_14939> indexed,omitNorms,indexOptions=DOCS_ONLY<_class:org.kablink.teaming.domain.Folder> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_docId:14939> indexed,tokenized,omitNorms,indexOptions=DOCS_ONLY<_entityId:14939> stored,indexed,tokenized<title:subfolder2> indexed,omitNorms,indexOptions=DOCS_ONLY<_sortTitle:subfolder2> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_title1:s> indexed,omitNorms<title:subfolder2> stored,indexed,tokenized<_extendedTitle:subfolder2 (admin (admin))> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_bsortTitle:subfolder2> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_entityType:folder> indexed,omitNorms,indexOptions=DOCS_ONLY<_preDeleted:false> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_definitionType:5> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_commandDef:402883c6115753d8011157619e350009> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_createdWithDef:402883c6115753d8011157619e350009> indexed,omitNorms,indexOptions=DOCS_ONLY<_entryDefs: 402883c6115753d8011157829367000f> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_family:file> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_entryAncestry:14939> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_entryAncestry:38> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_entryAncestry:2> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_entryAncestry:1> stored,omitNorms,indexOptions=DOCS_ONLY<_entityPath:/Home Workspace/Personal Workspaces/admin (admin)/subfolder2> indexed,omitNorms,indexOptions=DOCS_ONLY<_sortEntityPath:/home workspace/personal workspaces/admin (admin)/subfolder2> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_iconName:/icons/folder_blue_file_library.png> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_isLibrary:true> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_isMirrored:false> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_isHomeDir:false> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_isMyFilesDir:false> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_isTopFolder:true> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_isCloud:false> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_fileTime:1404076027043> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creationDate:20140629205428> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creationDay:20140629> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creationYearMonth:201406> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creationYear:2014> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creatorId:1> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creatorName:admin> stored,indexed,tokenized<_creatorTitle:admin> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_sortCreatorTitle:admin> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationDate:20140629210707> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationDay:20140629> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationYearMonth:201406> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationYear:2014> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationId:1> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationName:admin> stored,indexed,tokenized<_modificationTitle:admin> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_ownerId:1> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_ownerName:admin> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_ownerTitle:admin> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_binderParentId:38> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_docType:binder> stored,indexed,tokenized,omitNorms,indexOptions=DOCS_ONLY<_eventDates:> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_eventCount:0> stored,omitNorms,indexOptions=DOCS_ONLY<_tagField:> indexed,tokenized<_generalText:>>
	_uid:org.kablink.teaming.domain.FolderEntry_609895
	Document<stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_entryType:entry> stored,indexed,tokenized,omitNorms,indexOptions=DOCS_ONLY<_entryAclParentId:14939> indexed,omitNorms,indexOptions=DOCS_ONLY<_rootAcl:all> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_binderId:14939> indexed,omitNorms,indexOptions=DOCS_ONLY<_sortEntityPath:/home workspace/personal workspaces/admin (admin)/subfolder2/adduser.log> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_uid:org.kablink.teaming.domain.FolderEntry_609895> indexed,omitNorms,indexOptions=DOCS_ONLY<_class:org.kablink.teaming.domain.FolderEntry> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_docId:609895> indexed,tokenized,omitNorms,indexOptions=DOCS_ONLY<_entityId:609895> stored,indexed,tokenized<title:adduser.log> indexed,omitNorms,indexOptions=DOCS_ONLY<_sortTitle:adduser.log> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_title1:a> indexed,omitNorms<title:adduser.log> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_entityType:folderEntry> indexed,omitNorms,indexOptions=DOCS_ONLY<_preDeleted:false> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_definitionType:1> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_commandDef:402883c6115753d8011157829367000f> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_createdWithDef:402883c6115753d8011157829367000f> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_family:file> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_entryAncestry:14939> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_entryAncestry:38> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_entryAncestry:2> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_entryAncestry:1> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creationDate:20140629210707> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creationDay:20140629> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creationYearMonth:201406> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creationYear:2014> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creatorId:1> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creatorName:admin> stored,indexed,tokenized<_creatorTitle:admin> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_sortCreatorTitle:admin> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationDate:20140629210707> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationDay:20140629> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationYearMonth:201406> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationYear:2014> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationId:1> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationName:admin> stored,indexed,tokenized<_modificationTitle:admin> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_docType:entry> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_isLibrary:true> stored,indexed,tokenized,omitNorms,indexOptions=DOCS_ONLY<_eventDates:> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_eventCount:0> stored,omitNorms,indexOptions=DOCS_ONLY<_tagField:> indexed,tokenized<_generalText:> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_primaryFileID:24e364f646e891a10146e973ecfd000a> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_fileID:24e364f646e891a10146e973ecfd000a> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_fileCreatorId:1> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_fileSize:00000206> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_fileSizeInBytes:210626> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_fileMd5:6faf336e9d99e6e42b38897f8ed7272e> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_fileVersion:1> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_fileMajorVersion:1> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_fileMinorVersion:0> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_fileTime:1263266284000> stored,indexed,tokenized<_fileName:adduser.log> indexed,omitNorms,indexOptions=DOCS_ONLY<_fileName:adduser.log> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_fileTimeId:X_Z_YY_Z24e364f646e891a10146e973ecfd000a1263266284000> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_fileNameId:X_Z_YY_Z24e364f646e891a10146e973ecfd000aadduser.log> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_docNum:1> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_sortNum:000000000000BIZ00001> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_topFolderId:14939> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_lastActivity:20140629210707> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_lastActivityDay:20140629> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_lastActivityYearMonth:201406> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_lastActivityYear:2014> indexed,omitNorms,indexOptions=DOCS_ONLY<_totalReplyCount:0000> stored,omitNorms,indexOptions=DOCS_ONLY<_totalReplyCount:0>>
	_fileOnlyID:24e364f646e891a10146e973ecfd000a
	Document<stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_entryType:entry> stored,indexed,tokenized,omitNorms,indexOptions=DOCS_ONLY<_entryAclParentId:14939> indexed,omitNorms,indexOptions=DOCS_ONLY<_rootAcl:all> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_binderId:14939> indexed,omitNorms,indexOptions=DOCS_ONLY<_sortEntityPath:/home workspace/personal workspaces/admin (admin)/subfolder2/adduser.log> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_uid:org.kablink.teaming.domain.FolderEntry_609895> indexed,omitNorms,indexOptions=DOCS_ONLY<_class:org.kablink.teaming.domain.FolderEntry> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_docId:609895> indexed,tokenized,omitNorms,indexOptions=DOCS_ONLY<_entityId:609895> stored,indexed,tokenized<title:adduser.log> indexed,omitNorms,indexOptions=DOCS_ONLY<_sortTitle:adduser.log> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_title1:a> indexed,omitNorms<title:adduser.log> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_entityType:folderEntry> indexed,omitNorms,indexOptions=DOCS_ONLY<_preDeleted:false> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_definitionType:1> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_commandDef:402883c6115753d8011157829367000f> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_createdWithDef:402883c6115753d8011157829367000f> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_family:file> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_entryAncestry:14939> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_entryAncestry:38> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_entryAncestry:2> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_entryAncestry:1> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_attType:entry> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_contentIndexed:true> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_docType:attachment> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_fileID:24e364f646e891a10146e973ecfd000a> indexed,omitNorms,indexOptions=DOCS_ONLY<_fileOnlyID:24e364f646e891a10146e973ecfd000a> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_fileCreatorId:1> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_fileSize:00000206> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_fileSizeInBytes:210626> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_fileMd5:6faf336e9d99e6e42b38897f8ed7272e> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_fileVersion:1> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_fileMajorVersion:1> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_fileMinorVersion:0> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_fileTime:1263266284000> stored,indexed,tokenized<_fileName:adduser.log> indexed,omitNorms,indexOptions=DOCS_ONLY<_fileName:adduser.log> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_fileDesc:> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_fileStatus:0> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_fileExt:log> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_fileNameUnique:false> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_isLibrary:true> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creationDate:20140629210707> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creationDay:20140629> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creationYearMonth:201406> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creationYear:2014> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creatorId:1> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creatorName:admin> stored,indexed,tokenized<_creatorTitle:admin> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_sortCreatorTitle:admin> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationDate:20100112031804> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationDay:20100112> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationYearMonth:201001> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationYear:2010> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationId:1> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationName:admin> stored,indexed,tokenized<_modificationTitle:admin> stored,omitNorms,indexOptions=DOCS_ONLY<_tagField:> indexed,tokenized<_generalText: 22:16:45   POST /ssf/s/portalLogin HTTP/1.1  Host: localhost:8079  User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.0.16) Gecko/2009120208 Firefox/3.0.16 (.NET CLR 3.5.30729)  

	=> even (using _uid and _fileOnlyID)

	3) Deleting a file

	_uid:org.kablink.teaming.domain.Folder_14939
	Document<indexed,omitNorms,indexOptions=DOCS_ONLY<_entryAcl:all> indexed,omitNorms,indexOptions=DOCS_ONLY<_folderAcl:own> indexed,omitNorms,indexOptions=DOCS_ONLY<_folderAcl:team> indexed,omitNorms,indexOptions=DOCS_ONLY<_bOwnerAcl:1> indexed,omitNorms,indexOptions=DOCS_ONLY<_rootAcl:all> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_normTitle:subfolder2> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_normTitleField:subfolder2> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_uid:org.kablink.teaming.domain.Folder_14939> indexed,omitNorms,indexOptions=DOCS_ONLY<_class:org.kablink.teaming.domain.Folder> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_docId:14939> indexed,tokenized,omitNorms,indexOptions=DOCS_ONLY<_entityId:14939> stored,indexed,tokenized<title:subfolder2> indexed,omitNorms,indexOptions=DOCS_ONLY<_sortTitle:subfolder2> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_title1:s> indexed,omitNorms<title:subfolder2> stored,indexed,tokenized<_extendedTitle:subfolder2 (admin (admin))> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_bsortTitle:subfolder2> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_entityType:folder> indexed,omitNorms,indexOptions=DOCS_ONLY<_preDeleted:false> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_definitionType:5> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_commandDef:402883c6115753d8011157619e350009> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_createdWithDef:402883c6115753d8011157619e350009> indexed,omitNorms,indexOptions=DOCS_ONLY<_entryDefs: 402883c6115753d8011157829367000f> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_family:file> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_entryAncestry:14939> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_entryAncestry:38> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_entryAncestry:2> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_entryAncestry:1> stored,omitNorms,indexOptions=DOCS_ONLY<_entityPath:/Home Workspace/Personal Workspaces/admin (admin)/subfolder2> indexed,omitNorms,indexOptions=DOCS_ONLY<_sortEntityPath:/home workspace/personal workspaces/admin (admin)/subfolder2> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_iconName:/icons/folder_blue_file_library.png> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_isLibrary:true> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_isMirrored:false> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_isHomeDir:false> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_isMyFilesDir:false> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_isTopFolder:true> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_isCloud:false> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_fileTime:1404076921123> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creationDate:20140629205428> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creationDay:20140629> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creationYearMonth:201406> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creationYear:2014> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creatorId:1> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_creatorName:admin> stored,indexed,tokenized<_creatorTitle:admin> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_sortCreatorTitle:admin> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationDate:20140629212201> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationDay:20140629> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationYearMonth:201406> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationYear:2014> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationId:1> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_modificationName:admin> stored,indexed,tokenized<_modificationTitle:admin> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_ownerId:1> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_ownerName:admin> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_ownerTitle:admin> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_binderParentId:38> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_docType:binder> stored,indexed,tokenized,omitNorms,indexOptions=DOCS_ONLY<_eventDates:> stored,indexed,omitNorms,indexOptions=DOCS_ONLY<_eventCount:0> stored,omitNorms,indexOptions=DOCS_ONLY<_tagField:> indexed,tokenized<_generalText:>>
	_uid:org.kablink.teaming.domain.FolderEntry_609895

	=> uneven (using _uid)

	4) Deleting a folder

	_binderId:14939
	_uid:org.kablink.teaming.domain.Folder_14939

	=> uneven (using _binderId and _uid)
	 *
	 * @param docsToAddOrDelete
	 * @return
	 */
	public static List getEffectiveDeletes(List docsToAddOrDelete) {
		List result = new ArrayList<Term>();
		
		Term term;
		Document doc;
		String termField;
		String termText;
		String docFieldValue;
		for(int i = 0; i < docsToAddOrDelete.size(); i++) {
			if(docsToAddOrDelete.get(i) instanceof Term) {
				term = (Term) docsToAddOrDelete.get(i);
				if(i < docsToAddOrDelete.size()-1) {
					// There is at least one more element after this term
					if(docsToAddOrDelete.get(i+1) instanceof Document) {
						// The next element is a document
						doc = (Document) docsToAddOrDelete.get(i+1);
						termField = term.field();
						if(termField != null) {
							termText = term.text();
							if(termText != null) {
								docFieldValue = doc.get(termField);
								if(!termText.equals(docFieldValue))
									result.add(term);
							}
						}						
						i++; // No need to examine the next element since we already did
					}
					else {
						result.add(term);
					}
				}
				else {
					// No more element after this term
					result.add(term);
				}
			}
		}
		
		return result;
	}
}
